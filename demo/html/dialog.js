console.log("loading dialog js!");let options=localStorage.getItem("options");options&&(window.options=JSON.parse(options));const BASE_URL=window.BASE_URL||(location.host.indexOf("80")>-1?"http://"+location.hostname+":8828":location.host.indexOf("xdawo")>-1?"http://emr.xdawo.com":"");function getAllDocList(){return new Promise((resolve,reject)=>{try{console.log("begin get doc list");const url=BASE_URL+"/api/getAllDocList";UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)}})}catch(e){reject(e)}})}function getMaxDocList(){return new Promise((resolve,reject)=>{try{console.log("begin get doc list");const url=BASE_URL+"/api/getMaxDocList";UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)}})}catch(e){reject(e)}})}function getAllDataSource(){return new Promise((resolve,reject)=>{try{console.log("begin get data source");var url=BASE_URL+"/api/getAllDataSource";window.options&&(url=window.options.baseUrl+"/getAllDataSource"),UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)}})}catch(e){reject(e)}})}function getDeptList(){return new Promise((resolve,reject)=>{try{console.log("begin get dept");var url=BASE_URL+"/api/getDeptList";window.options&&(url=window.options.baseUrl+"/getDeptList"),UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)}})}catch(e){reject(e)}})}function getDataSourceById(){return new Promise((resolve,reject)=>{var url=BASE_URL+"/api/getDataSourceById";window.options&&(url=window.options.baseUrl+"/getDataSourceById"),UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.message):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})})}function checkDocById(d){return new Promise((resolve,reject)=>{try{console.log("begin check doc");const url=BASE_URL+"/api/checkDocById";UE.ajax.request(url,{method:"POST",timeout:6e4,async:!0,data:d,dataType:"json",contentType:"application/json",onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.msg)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function getUserControlByPage(d){return new Promise((resolve,reject)=>{try{console.log("begin load user controls"),d=d||{page:1,perPage:10,keywords:""};let url=BASE_URL+"/api/getUserControlByPage"+makeQuery(d);UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function getPatientInfoByPage(d){return new Promise((resolve,reject)=>{try{console.log("begin load all patient"),d=d||{page:1,perPage:10,keywords:""};let url=BASE_URL+"/api/getPatientInfoByPage"+makeQuery(d);UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function getDeptByPage(d){return new Promise((resolve,reject)=>{try{console.log("begin load dept by page"),d=d||{page:1,perPage:10,keywords:""};let url=BASE_URL+"/api/getDeptByPage"+makeQuery(d);UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function deleteUserControlById(controlId){return new Promise((resolve,reject)=>{try{console.log("do delete user control by id");let url=BASE_URL+"/api/deleteUserControlById/"+controlId;UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function getUserControlById(controlId){return new Promise((resolve,reject)=>{try{console.log("do get user control by id");let url=BASE_URL+"/api/getUserControlById/"+controlId;UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function getDocTypeList(patientId){return new Promise((resolve,reject)=>{try{console.log("do get patient type list");let url=BASE_URL+"/api/getDocTypeList"+(patientId?"/"+patientId:"");UE.ajax.request(url,{method:"GET",timeout:1e4,async:!0,onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.msg):resolve(r.data)},onerror:function(e){reject("接口服务已断开或正在重启中～")}})}catch(e){reject(e)}})}function updateUserControl(data){return new Promise(function(resolve,reject){try{console.log("begin update user control");let url=BASE_URL+"/updateUserControl/"+data.controlId;UE.ajax.request(url,{method:"POST",timeout:1e4,async:!1,data:data,dataType:"json",contentType:"application/json",onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.message):resolve(r.data)},onerror:function(e){reject("Ajax请求失败")}})}catch(e){reject(e)}})}function addDataControl(data){return new Promise(function(resolve,reject){try{console.log("begin add user control");let url=BASE_URL+"/addDataControl";UE.ajax.request(url,{method:"POST",timeout:1e4,async:!1,data:data,dataType:"json",contentType:"application/json",onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.message):resolve(r.data)},onerror:function(e){reject("Ajax请求失败")}})}catch(e){reject(e)}})}function addDataSource(data){return new Promise(function(resolve,reject){try{console.log("begin add data source");let url=BASE_URL+"/addDataSource";UE.ajax.request(url,{method:"POST",timeout:1e4,async:!1,data:data,dataType:"json",contentType:"application/json",onsuccess:function(xhr){const r=eval("("+xhr.responseText+")");0!=r.status?reject(r.message):resolve(r.data)},onerror:function(e){reject("Ajax请求失败")}})}catch(e){reject(e)}})}function uuid(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function makeQuery(e){return`?${Object.entries(e).reduce((e,t)=>(e.push(t.join("=")),e),[]).join("&")}`}function getQuery(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var r=t[o].split("=");if(r[0]==e)return r[1]}return!1}function $id(e){return document.getElementById(e)}function showDialog(e){const t=e||{name:"json-data",data:null,width:650,height:500,title:"数据源详细（JSON）"};let o="";t.data&&(o=makeQuery(t.data));let r=window.editor.options.UEDITOR_HOME_URL+"dialogs/extends/"+t.name+".html"+o;console.log("dialog url",r);var n=new UE.ui.Dialog({iframeUrl:r,name:uuid(),editor:window.editor,title:t.title,cssRules:"width:"+t.width+"px;height:"+t.height+"px;",buttons:[{className:"edui-okbutton",label:"确定",onclick:function(){n.close(!0)}},{className:"edui-cancelbutton",label:"取消",onclick:function(){n.close(!1)}}]});return n.render(),n.open(),n.onok2=function(){console.log("this is my on ok"),t.onok&&t.onok()},n}function confirm(e){const t=e||{title:"提示",message:"确认删除吗？",onok:null,oncancel:null};let o="";t.title&&t.message&&(o=makeQuery({title:t.title,message:t.message}));let r=window.editor.options.UEDITOR_HOME_URL+"dialogs/extends/confirm.html"+o;console.log("dialog url",r);var n=new UE.ui.Dialog({iframeUrl:r,name:uuid(),editor:window.editor,title:t.title,cssRules:"width:300px;height:90px;",buttons:[{className:"edui-okbutton",label:"确定",onclick:function(){n.close(!0),t.onok&&t.onok()}},{className:"edui-cancelbutton",label:"取消",onclick:function(){n.close(!1),t.oncancel&&t.oncancel()}}]});return n.render(),n.open(),n}function $alert(e){const t={title:"提示",message:e||"你想要干什么哦？"};let o="";t.title&&t.message&&(o=makeQuery({title:t.title,message:t.message}));let r=window.editor.options.UEDITOR_HOME_URL+"dialogs/extends/alert.html"+o;console.log("dialog url",r);var n=new UE.ui.Dialog({iframeUrl:r,name:uuid(),editor:window.editor,title:t.title,cssRules:"width:300px;height:90px;",buttons:[{className:"edui-okbutton",label:"确定",onclick:function(){n.close(!0)}}]});return n.render(),n.open(),n}function addClearButtonOnInput(){$(".input-clearable").each(function(){let e=$('<a href="javascript:;" class="clear-icon"><img src="../image/images/clear-pain.png" class="clear-icon" alt="" /></a>');$(this).parent().append(e)})}function $id(e){return document.getElementById(e)}function RGB2Hex(e){if(!e)return"#000000";for(var t=e.match(/[0-9]{0,3}/g),o="#",r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],n=0;n<t.length;n++){for(var s=null,a=t[n],l=a,c=[];a>16;)s=a%16,a=a/16>>0,c.push(r[s]);c.push(r[a]),l<16&&""!=l&&c.push(0),o+=c.reverse().join("")}return o}function getRandomCode(e){if(e>0){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o="",r=0;r<e;r++){o+=t[parseInt(61*Math.random())]}return o}return!1}function getPreCell(e,t){let o=null,r=e.cellIndex+t;return console.log(e,r),r<0?null:e.parentNode&&e.parentNode.rowIndex>-1&&e.parentNode.cells.length>r&&(o=e.parentNode.cells[r])?o:null}function getTopCell(e,t){let o=null;return e.parentNode&&e.parentNode.rowIndex>0&&(o=e.parentNode.parentNode.rows[e.parentNode.rowIndex+t].cells[e.cellIndex])?o:null}function getMaxColNum(e){let t=0,o=e.rows.length;for(let r=0;r<o;r++){let o=e.rows[r].cells.length;o>t&&(t=o)}return t}function getFullRealCol(e,t){let o=[],r=getFullTable(e);for(let e=0;e<r.length;e++)o.push(r[e][t]);return o}function getRowAndCol(e,t,o){let r=[],n=getFullTable(e);for(let e=0;e<n.length;e++)r.push(n[e][o]);return{colCells:r,rowCells:n[t]}}function getFullTable(e){let t=getMaxColNum(e),o=e.rows.length,r=[];for(let n=0;n<o;n++){let o=e.rows[n],s=o.cells.length,a=[];for(let e=0;e<s;e++){let t=o.cells[e];if(t.colSpan>1)for(let e=0;e<t.colSpan;e++)a.push(t);else a.push(t)}if(a.length<t){let e=r[n-1];for(let t=0;t<e.length;t++)e[t]&&e[t].rowSpan>1&&a.splice(t,0,e[t])}r.push(a)}return r}Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e};
//# sourceMappingURL=dialog.js.map