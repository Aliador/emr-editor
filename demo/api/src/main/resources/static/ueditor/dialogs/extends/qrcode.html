<!DOCTYPE html>
<html>

<head>
  <title>常用组件</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <script type="text/javascript" src="../../third-party/jquery-1.10.2.js"></script>
  <script type="text/javascript" src="../../third-party/qrcode.min.js"></script>
  <style type="text/css">
  </style>
</head>

<body>
  <div
    style="width: calc(100%); height: calc(100vh); text-align: center;">
    <p style="font-size:14px;">
      请使用PDA或微信扫描以下二维码预览！
    </p>
    <p style="font-size:12px;">
      <a  id="url" href="http://" target="_blank" rel="noopener noreferrer"></a>
    </p>
    <div id="qrcode" style="width:200px;height:200px;margin:auto auto;">

    </div>
  </div>
  <script src="../../../dialog.js"></script>
  <script type="text/javascript">
  (function(){

    let patientDocId = getQuery("patientDocId");
    let docId = getQuery("docId");
    let baseUrl = getQuery("baseUrl");

    var qrcode = new QRCode(document.getElementById("qrcode"), {
      width: 200,
      height: 200
    });
    let url = "";
    if(baseUrl) {
       url = "http://" + location.host + "/api/emr/mobile2/#/default?patientDocId=" + patientDocId +"&showTitle=true&showToolbar=true";
      if (docId) url = "http://" + location.host + "/api/emr/mobile2/#/default?docId=" + docId +"&showTitle=true&showToolbar=true";
    }else {
      url = "http://" + location.host + "/mobile2/index.html/#/default?patientDocId=" + patientDocId +"&showTitle=true&showToolbar=true";
      if (docId) url = "http://" + location.host + "/mobile2/index.html/#/default?docId=" + docId +"&showTitle=true&showToolbar=true";
    }
    
    
    console.log('mobile url', url);
    if (url) {
      document.getElementById("url").innerText = url;
      document.getElementById("url").setAttribute("href",url);
      qrcode.makeCode(url);
    }
  })();
  </script>
</body>

</html>